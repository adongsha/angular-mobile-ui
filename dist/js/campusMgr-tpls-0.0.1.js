angular.module("amu",["amu-tpls","app.main","ngMobile"]),angular.module("amu-tpls",[]).run(["$templateCache",function(a){a.put("tpls/accordion/accordion-group.html",'<div class="accordion-group">\r\n  <div class="accordion-heading" ><a class="accordion-toggle" ng-click="isOpen = !isOpen" accordion-transclude="heading">{{heading}}</a></div>\r\n  <div class="accordion-body" collapse="!isOpen">\r\n    <div class="accordion-inner" ng-transclude></div>  </div>\r\n</div>'),a.put("tpls/accordion/accordion.html",'<div class="accordion" ng-transclude></div>'),a.put("tpls/alert/alert.html","<div class='alert' ng-class='type && \"alert-\" + type'>\r\n    <button ng-show='closeable' type='button' class='close' ng-click='close()'>&times;</button>\r\n    <div ng-transclude></div>\r\n</div>\r\n"),a.put("tpls/carousel/carousel.html",'<div ng-mouseenter="pause()" ng-mouseleave="play()" class="carousel">\r\n    <ol class="carousel-indicators" ng-show="slides().length > 1">\r\n        <li ng-repeat="slide in slides()" ng-class="{active: isActive(slide)}" ng-click="select(slide)"></li>\r\n    </ol>\r\n    <div class="carousel-inner" ng-transclude></div>\r\n    <a ng-click="prev()" class="carousel-control left" ng-show="slides().length > 1">&lsaquo;</a>\r\n    <a ng-click="next()" class="carousel-control right" ng-show="slides().length > 1">&rsaquo;</a>\r\n</div>\r\n'),a.put("tpls/carousel/slide.html","<div ng-class=\"{\r\n    'active': leaving || (active && !entering),\r\n    'prev': (next || active) && direction=='prev',\r\n    'next': (next || active) && direction=='next',\r\n    'right': direction=='prev',\r\n    'left': direction=='next'\r\n  }\" class=\"item\" ng-transclude></div>\r\n"),a.put("tpls/datepicker/datepicker.html",'<table>\r\n  <thead>\r\n    <tr class="text-center">\r\n      <th><button type="button" class="btn pull-left" ng-click="move(-1)"><i class="icon-chevron-left"></i></button></th>\r\n      <th colspan="{{rows[0].length - 2 + showWeekNumbers}}"><button type="button" class="btn btn-block" ng-click="toggleMode()"><strong>{{title}}</strong></button></th>\r\n      <th><button type="button" class="btn pull-right" ng-click="move(1)"><i class="icon-chevron-right"></i></button></th>\r\n    </tr>\r\n    <tr class="text-center" ng-show="labels.length > 0">\r\n      <th ng-show="showWeekNumbers">#</th>\r\n      <th ng-repeat="label in labels">{{label}}</th>\r\n    </tr>\r\n  </thead>\r\n  <tbody>\r\n    <tr ng-repeat="row in rows">\r\n      <td ng-show="showWeekNumbers" class="text-center"><em>{{ getWeekNumber(row) }}</em></td>\r\n      <td ng-repeat="dt in row" class="text-center">\r\n        <button type="button" style="width:100%;" class="btn" ng-class="{\'btn-info\': dt.selected}" ng-click="select(dt.date)" ng-disabled="dt.disabled"><span ng-class="{muted: dt.secondary}">{{dt.label}}</span></button>\r\n      </td>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n'),a.put("tpls/datepicker/popup.html",'<ul class="dropdown-menu" ng-style="{display: (isOpen && \'block\') || \'none\', top: position.top+\'px\', left: position.left+\'px\'}" class="dropdown-menu">\r\n	<li ng-transclude></li>\r\n	<li class="divider"></li>\r\n	<li style="padding: 9px;">\r\n		<span class="btn-group">\r\n			<button class="btn btn-small btn-inverse" ng-click="today()">Today</button>\r\n			<button class="btn btn-small btn-info" ng-click="showWeeks = ! showWeeks" ng-class="{active: showWeeks}">Weeks</button>\r\n			<button class="btn btn-small btn-danger" ng-click="clear()">Clear</button>\r\n		</span>\r\n		<button class="btn btn-small btn-success pull-right" ng-click="isOpen = false">Close</button>\r\n	</li>\r\n</ul>'),a.put("tpls/dialog/message.html",'<div class="modal-header">\r\n	<h3>{{ title }}</h3>\r\n</div>\r\n<div class="modal-body">\r\n	<p>{{ message }}</p>\r\n</div>\r\n<div class="modal-footer">\r\n	<button ng-repeat="btn in buttons" ng-click="close(btn.result)" class="btn" ng-class="btn.cssClass">{{ btn.label }}</button>\r\n</div>\r\n'),a.put("tpls/drawer/drawer.html",'<div class="drawer">\r\n	<div class="drawer-left" ng-class="{\'show\':drawers.leftActive}" ng-include="drawerLeftTpl">\r\n	</div>\r\n	<div class="drawer-right" ng-class="{\'show\':drawers.rightActive}" ng-include="drawerRightTpl">\r\n	</div>\r\n	<div class="drawer-up" ng-class="{\'drawer-left-show\':drawers.leftActive,\'drawer-right-show\':drawers.rightActive}"\r\n		 ng-transclude></div>\r\n</div>'),a.put("tpls/pagination/pager.html",'<div class="pager">\r\n  <ul>\r\n    <li ng-repeat="page in pages" ng-class="{disabled: page.disabled, previous: page.previous, next: page.next}"><a ng-click="selectPage(page.number)">{{page.text}}</a></li>\r\n  </ul>\r\n</div>\r\n'),a.put("tpls/pagination/pagination.html",'<div class="pagination"><ul>\r\n  <li ng-repeat="page in pages" ng-class="{active: page.active, disabled: page.disabled}"><a ng-click="selectPage(page.number)">{{page.text}}</a></li>\r\n  </ul>\r\n</div>\r\n'),a.put("tpls/popover/popover.html",'<div class="popover {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">\r\n  <div class="arrow"></div>\r\n\r\n  <div class="popover-inner">\r\n      <h3 class="popover-title" ng-bind="title" ng-show="title"></h3>\r\n      <div class="popover-content" ng-bind="content"></div>\r\n  </div>\r\n</div>\r\n'),a.put("tpls/progressbar/bar.html",'<div class="bar" ng-class=\'type && "bar-" + type\'></div>'),a.put("tpls/progressbar/progress.html",'<div class="progress"><progressbar ng-repeat="bar in bars" width="bar.to" old="bar.from" animate="bar.animate" type="bar.type"></progressbar></div>'),a.put("tpls/pull-refresh/pull-refresh.html",'<div class="pull-refresh">\r\n	<container class="pull-refresh-container">\r\n		<div class="pull-refresh-message">\r\n			<div class="pull-refresh-icon" class="icon"\r\n				 ng-class="{\'arrow\':isPulling,\'arrow-up\':isPullingEnough,\'loading\':isLoading}">\r\n			</div>\r\n			<span ng-hide="isPulling"> {{isLoading?\'正在加载 …\':\'加载完成\' }}</span>\r\n			<span ng-show="isPullingEnough"> 施放以加载 </span>\r\n\r\n		</div>\r\n		<div class="pull-refresh-content" ng-transclude>\r\n		</div>\r\n	</container>\r\n</div>\r\n\r\n'),a.put("tpls/rating/rating.html",'<span ng-mouseleave="reset()">\r\n	<i ng-repeat="number in range" ng-mouseenter="enter(number)" ng-click="rate(number)" ng-class="{\'icon-star\': number <= val, \'icon-star-empty\': number > val}"></i>\r\n</span>'),a.put("tpls/swipe-tabs/swipe-tab.html",'<li ng-class="{\'active\': active}"\r\n	ng-click="select()"\r\n	swipe-tab-heading-transclude>\r\n	{{heading}}\r\n</li>\r\n'),a.put("tpls/swipe-tabs/swipe-tabset-titles.html",'<ul class="swipe-nav">\r\n\r\n</ul>\r\n'),a.put("tpls/swipe-tabs/swipe-tabset.html",'<div class="swipe-tabset">\r\n\r\n	<div swipe-tabset-titles="tabsAbove"></div>\r\n\r\n	<div class="swipe-tab-content">\r\n		<container class="swipe-container"\r\n				   ng-style="{\'width\':paneWidth * tabs.length +\'px\'}">\r\n			<div class="swipe-tab-pane" ng-style="{\'width\':paneWidth +\'px\'}"\r\n				 ng-repeat="tab in tabs"\r\n				 swipe-tab-content-transclude="tab">\r\n			</div>\r\n		</container>\r\n	</div>\r\n	<div swipe-tabset-titles="!tabsAbove"></div>\r\n</div>\r\n\r\n'),a.put("tpls/tabs/tab.html",'<li ng-class="{active: active, disabled: disabled}">\r\n  <a ng-click="select()" tab-heading-transclude>{{heading}}</a>\r\n</li>\r\n'),a.put("tpls/tabs/tabset-titles.html","<ul class=\"nav {{type && 'nav-' + type}}\" ng-class=\"{'nav-stacked': vertical}\">\r\n</ul>\r\n"),a.put("tpls/tabs/tabset.html",'\r\n<div class="tabbable" ng-class="{\'tabs-right\': direction == \'right\', \'tabs-left\': direction == \'left\', \'tabs-below\': direction == \'below\'}">\r\n  <div tabset-titles="tabsAbove"></div>\r\n  <div class="tab-content">\r\n    <div class="tab-pane" \r\n         ng-repeat="tab in tabs" \r\n         ng-class="{active: tab.active}"\r\n         tab-content-transclude="tab">\r\n    </div>\r\n  </div>\r\n  <div tabset-titles="!tabsAbove"></div>\r\n</div>\r\n'),a.put("tpls/timepicker/timepicker.html",'<table class="form-inline">\r\n	<tr class="text-center">\r\n		<td><a ng-click="incrementHours()" class="btn btn-link"><i class="icon-chevron-up"></i></a></td>\r\n		<td>&nbsp;</td>\r\n		<td><a ng-click="incrementMinutes()" class="btn btn-link"><i class="icon-chevron-up"></i></a></td>\r\n		<td ng-show="showMeridian"></td>\r\n	</tr>\r\n	<tr>\r\n		<td class="control-group" ng-class="{\'error\': !validHours}"><input type="text" ng-model="hours" ng-change="updateHours()" class="span1 text-center" ng-mousewheel="incrementHours()" ng-readonly="readonlyInput" maxlength="2" /></td>\r\n		<td>:</td>\r\n		<td class="control-group" ng-class="{\'error\': !validMinutes}"><input type="text" ng-model="minutes" ng-change="updateMinutes()" class="span1 text-center" ng-readonly="readonlyInput" maxlength="2"></td>\r\n		<td ng-show="showMeridian"><button ng-click="toggleMeridian()" class="btn text-center">{{meridian}}</button></td>\r\n	</tr>\r\n	<tr class="text-center">\r\n		<td><a ng-click="decrementHours()" class="btn btn-link"><i class="icon-chevron-down"></i></a></td>\r\n		<td>&nbsp;</td>\r\n		<td><a ng-click="decrementMinutes()" class="btn btn-link"><i class="icon-chevron-down"></i></a></td>\r\n		<td ng-show="showMeridian"></td>\r\n	</tr>\r\n</table>'),a.put("tpls/tooltip/tooltip-html-unsafe-popup.html",'<div class="tooltip {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">\r\n  <div class="tooltip-arrow"></div>\r\n  <div class="tooltip-inner" ng-bind-html-unsafe="content"></div>\r\n</div>\r\n'),a.put("tpls/tooltip/tooltip-popup.html",'<div class="tooltip {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">\r\n  <div class="tooltip-arrow"></div>\r\n  <div class="tooltip-inner" ng-bind="content"></div>\r\n</div>\r\n'),a.put("tpls/typeahead/typeahead-match.html",'<a tabindex="-1" ng-bind-html-unsafe="match.label | typeaheadHighlight:query"></a>'),a.put("tpls/typeahead/typeahead-popup.html",'<ul class="typeahead dropdown-menu" ng-style="{display: isOpen()&&\'block\' || \'none\', top: position.top+\'px\', left: position.left+\'px\'}">\r\n    <li ng-repeat="match in matches" ng-class="{active: isActive($index) }" ng-mouseenter="selectActive($index)" ng-click="selectMatch($index)">\r\n        <typeahead-match index="$index" match="match" query="query" template-url="templateUrl"></typeahead-match>\r\n    </li>\r\n</ul>')}]),function(a,b){"use strict";function c(){if(!d.READY){d.event.determineEventTypes();for(var a in d.gestures)d.gestures.hasOwnProperty(a)&&d.detection.register(d.gestures[a]);d.event.onTouch(d.DOCUMENT,d.EVENT_MOVE,d.detection.detect),d.event.onTouch(d.DOCUMENT,d.EVENT_END,d.detection.detect),d.READY=!0}}var d=function(a,b){return new d.Instance(a,b||{})};d.defaults={stop_browser_behavior:{userSelect:"none",touchAction:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},d.HAS_POINTEREVENTS=a.navigator.pointerEnabled||a.navigator.msPointerEnabled,d.HAS_TOUCHEVENTS="ontouchstart"in a,d.MOBILE_REGEX=/mobile|tablet|ip(ad|hone|od)|android|silk/i,d.NO_MOUSEEVENTS=d.HAS_TOUCHEVENTS&&a.navigator.userAgent.match(d.MOBILE_REGEX),d.EVENT_TYPES={},d.DIRECTION_DOWN="down",d.DIRECTION_LEFT="left",d.DIRECTION_UP="up",d.DIRECTION_RIGHT="right",d.POINTER_MOUSE="mouse",d.POINTER_TOUCH="touch",d.POINTER_PEN="pen",d.EVENT_START="start",d.EVENT_MOVE="move",d.EVENT_END="end",d.DOCUMENT=a.document,d.plugins={},d.READY=!1,d.Instance=function(a,b){var e=this;return c(),this.element=a,this.enabled=!0,this.options=d.utils.extend(d.utils.extend({},d.defaults),b||{}),this.options.stop_browser_behavior&&d.utils.stopDefaultBrowserBehavior(this.element,this.options.stop_browser_behavior),d.event.onTouch(a,d.EVENT_START,function(a){e.enabled&&d.detection.startDetect(e,a)}),this},d.Instance.prototype={on:function(a,b){for(var c=a.split(" "),d=0;d<c.length;d++)this.element.addEventListener(c[d],b,!1);return this},off:function(a,b){for(var c=a.split(" "),d=0;d<c.length;d++)this.element.removeEventListener(c[d],b,!1);return this},trigger:function(a,b){var c=d.DOCUMENT.createEvent("Event");c.initEvent(a,!0,!0),c.gesture=b;var e=this.element;return d.utils.hasParent(b.target,e)&&(e=b.target),e.dispatchEvent(c),this},enable:function(a){return this.enabled=a,this}};var e=null,f=!1,g=!1;if(d.event={bindDom:function(a,b,c){for(var d=b.split(" "),e=0;e<d.length;e++)a.addEventListener(d[e],c,!1)},onTouch:function(a,b,c){var h=this;this.bindDom(a,d.EVENT_TYPES[b],function(i){var j=i.type.toLowerCase();if(!j.match(/mouse/)||!g){j.match(/touch/)||j.match(/pointerdown/)||j.match(/mouse/)&&1===i.which?f=!0:j.match(/mouse/)&&1!==i.which&&(f=!1),j.match(/touch|pointer/)&&(g=!0);var k=0;f&&(d.HAS_POINTEREVENTS&&b!=d.EVENT_END?k=d.PointerEvent.updatePointer(b,i):j.match(/touch/)?k=i.touches.length:g||(k=j.match(/up/)?0:1),k>0&&b==d.EVENT_END?b=d.EVENT_MOVE:k||(b=d.EVENT_END),(k||null===e)&&(e=i),c.call(d.detection,h.collectEventData(a,b,h.getTouchList(e,b),i)),d.HAS_POINTEREVENTS&&b==d.EVENT_END&&(k=d.PointerEvent.updatePointer(b,i))),k||(e=null,f=!1,g=!1,d.PointerEvent.reset())}})},determineEventTypes:function(){var a;a=d.HAS_POINTEREVENTS?d.PointerEvent.getEvents():d.NO_MOUSEEVENTS?["touchstart","touchmove","touchend touchcancel"]:["touchstart mousedown","touchmove mousemove","touchend touchcancel mouseup"],d.EVENT_TYPES[d.EVENT_START]=a[0],d.EVENT_TYPES[d.EVENT_MOVE]=a[1],d.EVENT_TYPES[d.EVENT_END]=a[2]},getTouchList:function(a){return d.HAS_POINTEREVENTS?d.PointerEvent.getTouchList():a.touches?a.touches:(a.indentifier=1,[a])},collectEventData:function(a,b,c,e){var f=d.POINTER_TOUCH;return(e.type.match(/mouse/)||d.PointerEvent.matchType(d.POINTER_MOUSE,e))&&(f=d.POINTER_MOUSE),{center:d.utils.getCenter(c),timeStamp:(new Date).getTime(),target:e.target,touches:c,eventType:b,pointerType:f,srcEvent:e,preventDefault:function(){this.srcEvent.preventManipulation&&this.srcEvent.preventManipulation(),this.srcEvent.preventDefault&&this.srcEvent.preventDefault()},stopPropagation:function(){this.srcEvent.stopPropagation()},stopDetect:function(){return d.detection.stopDetect()}}}},d.PointerEvent={pointers:{},getTouchList:function(){var a=this,b=[];return Object.keys(a.pointers).sort().forEach(function(c){b.push(a.pointers[c])}),b},updatePointer:function(a,b){return a==d.EVENT_END?this.pointers={}:(b.identifier=b.pointerId,this.pointers[b.pointerId]=b),Object.keys(this.pointers).length},matchType:function(a,b){if(!b.pointerType)return!1;var c={};return c[d.POINTER_MOUSE]=b.pointerType==b.MSPOINTER_TYPE_MOUSE||b.pointerType==d.POINTER_MOUSE,c[d.POINTER_TOUCH]=b.pointerType==b.MSPOINTER_TYPE_TOUCH||b.pointerType==d.POINTER_TOUCH,c[d.POINTER_PEN]=b.pointerType==b.MSPOINTER_TYPE_PEN||b.pointerType==d.POINTER_PEN,c[a]},getEvents:function(){return["pointerdown MSPointerDown","pointermove MSPointerMove","pointerup pointercancel MSPointerUp MSPointerCancel"]},reset:function(){this.pointers={}}},d.utils={extend:function(a,c,d){for(var e in c)a[e]!==b&&d||(a[e]=c[e]);return a},hasParent:function(a,b){for(;a;){if(a==b)return!0;a=a.parentNode}return!1},getCenter:function(a){for(var b=[],c=[],d=0,e=a.length;e>d;d++)b.push(a[d].pageX),c.push(a[d].pageY);return{pageX:(Math.min.apply(Math,b)+Math.max.apply(Math,b))/2,pageY:(Math.min.apply(Math,c)+Math.max.apply(Math,c))/2}},getVelocity:function(a,b,c){return{x:Math.abs(b/a)||0,y:Math.abs(c/a)||0}},getAngle:function(a,b){var c=b.pageY-a.pageY,d=b.pageX-a.pageX;return 180*Math.atan2(c,d)/Math.PI},getDirection:function(a,b){var c=Math.abs(a.pageX-b.pageX),e=Math.abs(a.pageY-b.pageY);return c>=e?a.pageX-b.pageX>0?d.DIRECTION_LEFT:d.DIRECTION_RIGHT:a.pageY-b.pageY>0?d.DIRECTION_UP:d.DIRECTION_DOWN},getDistance:function(a,b){var c=b.pageX-a.pageX,d=b.pageY-a.pageY;return Math.sqrt(c*c+d*d)},getScale:function(a,b){return a.length>=2&&b.length>=2?this.getDistance(b[0],b[1])/this.getDistance(a[0],a[1]):1},getRotation:function(a,b){return a.length>=2&&b.length>=2?this.getAngle(b[1],b[0])-this.getAngle(a[1],a[0]):0},isVertical:function(a){return a==d.DIRECTION_UP||a==d.DIRECTION_DOWN},stopDefaultBrowserBehavior:function(a,b){var c,d=["webkit","khtml","moz","Moz","ms","o",""];if(b&&a.style){for(var e=0;e<d.length;e++)for(var f in b)b.hasOwnProperty(f)&&(c=f,d[e]&&(c=d[e]+c.substring(0,1).toUpperCase()+c.substring(1)),a.style[c]=b[f]);"none"==b.userSelect&&(a.onselectstart=function(){return!1})}}},d.detection={gestures:[],current:null,previous:null,stopped:!1,startDetect:function(a,b){this.current||(this.stopped=!1,this.current={inst:a,startEvent:d.utils.extend({},b),lastEvent:!1,name:""},this.detect(b))},detect:function(a){if(this.current&&!this.stopped){a=this.extendEventData(a);for(var b=this.current.inst.options,c=0,e=this.gestures.length;e>c;c++){var f=this.gestures[c];if(!this.stopped&&b[f.name]!==!1&&f.handler.call(f,a,this.current.inst)===!1){this.stopDetect();break}}return this.current&&(this.current.lastEvent=a),a.eventType==d.EVENT_END&&!a.touches.length-1&&this.stopDetect(),a}},stopDetect:function(){this.previous=d.utils.extend({},this.current),this.current=null,this.stopped=!0},extendEventData:function(a){var b=this.current.startEvent;if(b&&(a.touches.length!=b.touches.length||a.touches===b.touches)){b.touches=[];for(var c=0,e=a.touches.length;e>c;c++)b.touches.push(d.utils.extend({},a.touches[c]))}var f=a.timeStamp-b.timeStamp,g=a.center.pageX-b.center.pageX,h=a.center.pageY-b.center.pageY,i=d.utils.getVelocity(f,g,h);return d.utils.extend(a,{deltaTime:f,deltaX:g,deltaY:h,velocityX:i.x,velocityY:i.y,distance:d.utils.getDistance(b.center,a.center),angle:d.utils.getAngle(b.center,a.center),interimAngle:this.current.lastEvent&&d.utils.getAngle(this.current.lastEvent.center,a.center),direction:d.utils.getDirection(b.center,a.center),interimDirection:this.current.lastEvent&&d.utils.getDirection(this.current.lastEvent.center,a.center),scale:d.utils.getScale(b.touches,a.touches),rotation:d.utils.getRotation(b.touches,a.touches),startEvent:b}),a},register:function(a){var c=a.defaults||{};return c[a.name]===b&&(c[a.name]=!0),d.utils.extend(d.defaults,c,!0),a.index=a.index||1e3,this.gestures.push(a),this.gestures.sort(function(a,b){return a.index<b.index?-1:a.index>b.index?1:0}),this.gestures}},d.gestures=d.gestures||{},d.gestures.Hold={name:"hold",index:10,defaults:{hold_timeout:500,hold_threshold:1},timer:null,handler:function(a,b){switch(a.eventType){case d.EVENT_START:clearTimeout(this.timer),d.detection.current.name=this.name,this.timer=setTimeout(function(){"hold"==d.detection.current.name&&b.trigger("hold",a)},b.options.hold_timeout);break;case d.EVENT_MOVE:a.distance>b.options.hold_threshold&&clearTimeout(this.timer);break;case d.EVENT_END:clearTimeout(this.timer)}}},d.gestures.Tap={name:"tap",index:100,defaults:{tap_max_touchtime:250,tap_max_distance:10,tap_always:!0,doubletap_distance:20,doubletap_interval:300},handler:function(a,b){if(a.eventType==d.EVENT_END){var c=d.detection.previous,e=!1;if(a.deltaTime>b.options.tap_max_touchtime||a.distance>b.options.tap_max_distance)return;c&&"tap"==c.name&&a.timeStamp-c.lastEvent.timeStamp<b.options.doubletap_interval&&a.distance<b.options.doubletap_distance&&(b.trigger("doubletap",a),e=!0),(!e||b.options.tap_always)&&(d.detection.current.name="tap",b.trigger(d.detection.current.name,a))}}},d.gestures.Swipe={name:"swipe",index:40,defaults:{swipe_max_touches:1,swipe_velocity:.7},handler:function(a,b){if(a.eventType==d.EVENT_END){if(b.options.swipe_max_touches>0&&a.touches.length>b.options.swipe_max_touches)return;(a.velocityX>b.options.swipe_velocity||a.velocityY>b.options.swipe_velocity)&&(b.trigger(this.name,a),b.trigger(this.name+a.direction,a))}}},d.gestures.Drag={name:"drag",index:50,defaults:{drag_min_distance:10,correct_for_drag_min_distance:!0,drag_max_touches:1,drag_block_horizontal:!1,drag_block_vertical:!1,drag_lock_to_axis:!1,drag_lock_min_distance:25},triggered:!1,handler:function(a,b){if(d.detection.current.name!=this.name&&this.triggered)return b.trigger(this.name+"end",a),this.triggered=!1,void 0;if(!(b.options.drag_max_touches>0&&a.touches.length>b.options.drag_max_touches))switch(a.eventType){case d.EVENT_START:this.triggered=!1;break;case d.EVENT_MOVE:if(a.distance<b.options.drag_min_distance&&d.detection.current.name!=this.name)return;if(d.detection.current.name!=this.name&&(d.detection.current.name=this.name,b.options.correct_for_drag_min_distance)){var c=Math.abs(b.options.drag_min_distance/a.distance);d.detection.current.startEvent.center.pageX+=a.deltaX*c,d.detection.current.startEvent.center.pageY+=a.deltaY*c,a=d.detection.extendEventData(a)}(d.detection.current.lastEvent.drag_locked_to_axis||b.options.drag_lock_to_axis&&b.options.drag_lock_min_distance<=a.distance)&&(a.drag_locked_to_axis=!0);var e=d.detection.current.lastEvent.direction;a.drag_locked_to_axis&&e!==a.direction&&(a.direction=d.utils.isVertical(e)?a.deltaY<0?d.DIRECTION_UP:d.DIRECTION_DOWN:a.deltaX<0?d.DIRECTION_LEFT:d.DIRECTION_RIGHT),this.triggered||(b.trigger(this.name+"start",a),this.triggered=!0),b.trigger(this.name,a),b.trigger(this.name+a.direction,a),(b.options.drag_block_vertical&&d.utils.isVertical(a.direction)||b.options.drag_block_horizontal&&!d.utils.isVertical(a.direction))&&a.preventDefault();break;case d.EVENT_END:this.triggered&&b.trigger(this.name+"end",a),this.triggered=!1}}},d.gestures.Transform={name:"transform",index:45,defaults:{transform_min_scale:.01,transform_min_rotation:1,transform_always_block:!1},triggered:!1,handler:function(a,b){if(d.detection.current.name!=this.name&&this.triggered)return b.trigger(this.name+"end",a),this.triggered=!1,void 0;if(!(a.touches.length<2))switch(b.options.transform_always_block&&a.preventDefault(),a.eventType){case d.EVENT_START:this.triggered=!1;break;case d.EVENT_MOVE:var c=Math.abs(1-a.scale),e=Math.abs(a.rotation);if(c<b.options.transform_min_scale&&e<b.options.transform_min_rotation)return;d.detection.current.name=this.name,this.triggered||(b.trigger(this.name+"start",a),this.triggered=!0),b.trigger(this.name,a),e>b.options.transform_min_rotation&&b.trigger("rotate",a),c>b.options.transform_min_scale&&(b.trigger("pinch",a),b.trigger("pinch"+(a.scale<1?"in":"out"),a));break;case d.EVENT_END:this.triggered&&b.trigger(this.name+"end",a),this.triggered=!1}}},d.gestures.Touch={name:"touch",index:-1/0,defaults:{prevent_default:!1,prevent_mouseevents:!1},handler:function(a,b){return b.options.prevent_mouseevents&&a.pointerType==d.POINTER_MOUSE?(a.stopDetect(),void 0):(b.options.prevent_default&&a.preventDefault(),a.eventType==d.EVENT_START&&b.trigger(this.name,a),void 0)}},d.gestures.Release={name:"release",index:1/0,handler:function(a,b){a.eventType==d.EVENT_END&&b.trigger(this.name,a)}},!angular)throw new Error("window.angular is not defined.");var h,i=["hold","tap","doubletap","drag","dragstart","dragend","dragup","dragdown","dragleft","dragright","swipe","swipeup","swipedown","swipeleft","swiperight","transform","transformstart","transformend","rotate","pinch","pinchin","pinchout","touch","release"];angular.injector(["ng"]).invoke(["$rootScope",function(a){h=a.$new()}]);var j=angular.module("utils.hammer",[]);j.factory("Hammer",function(){return d}),i.forEach(function(a){var b="hammer"+a[0].toUpperCase()+a.slice(1);j.directive(b,["$parse",function(c){return function(e,f,g){var i,j,k,l=h.$eval(g[b]);"undefined"==typeof l?i=c(g[b]):(i=c(l.fn),delete l.fn,j=l),k=d(f[0],j).on(a,function(a){e.$apply(function(){i(e,{$event:a})})})}}])})}(this),angular.module("utils.mobile-nav",[]).provider("$change",function(){var a={modal:["modal",""],none:["",""]},b={prefix:"amu-"},c="in",d="out",e="reverse",f="animationName"in document.documentElement.style?"animationend":"webkitAnimationEnd";this.setTransitionPreset=function(b,c,d){c=c||"",d=d||c,a[b]=[c,d]},this.options=function(a){b=angular.extend(b,a||{})},this.$get=["$q","$rootScope",function(g,h){return function(i,j,k,l,m){function n(a){return a.reduce(function(a,b){return a+(b?" "+m.prefix+b:"")},"")}function o(){h.$apply(function(){r.resolve()})}m=angular.extend(m||{},b);var p,q,r=g.defer(),s=a[k]?a[k]:[k,k];i.css("z-index","-100"),i[0].offsetWidth+=0;var t=n([l?d:c,p=s[l?1:0],l&&e||""]);i.addClass(t);var u;j&&(u=n([l?c:d,q=s[l?0:1],l&&e||""]),j.addClass(u)),i.css("z-index",""),i[0].offsetWidth+=0;var v;return p&&p.length?(v=i).bind(f,o):j&&q&&q.length?(v=j).bind(f,o):r.resolve(),r.promise.then(function(){v&&v.unbind(f,o),i.removeClass(t),j&&j.removeClass(u)}),r.promise.cancel=function(){r.resolve()},r.promise}}]}).provider("$navigate",function(){this.$get=["$rootScope","$location","$route",function(a,b){function c(a,b,c){var d,e=a,f=b||"slide",g=c;this.transition=function(){var a;return d?(a=d,d=null):a=f,a},this.path=function(){return e},this.reverse=function(){return g},this.transitionOnce=function(a){d=a}}function d(b,c,d){a.$broadcast("$pageTransitionStart",b,c,d),f.current=f.next}function e(){f.current&&g.push(f.current),f.next=new c(b.path()),f.next.transitionOnce("none"),d(f.next),f.onRouteSuccess=null}var f={},g=[];return f.onRouteSuccess=null,a.$on("$routeChangeSuccess",function(a,b,c){b.$$route&&b.$$route.redirectTo||(f.onRouteSuccess||e)(a,b,c)}),f.go=function(a,e,h){"boolean"==typeof e&&(h=e,e=null),b.path(a),f.onRouteSuccess=function(b,i){f.current&&g.push(f.current),f.next=new c(a,e||i.$$route&&i.$$route.transition,h),d(f.next,f.current,!1)}},f.eraseHistory=function(){g.length=0},f.back=function(){if(g.length>0){var a=g[g.length-1];return b.path(a.path()),f.onRouteSuccess=function(){g.pop(),f.next=a,d(f.next,f.current,!0)},!0}return!1},f}]}).directive("mobileView",["$rootScope","$compile","$controller","$route","$change","$q",function(a,b,c,d,e,f){function g(g,h,i){function j(a){var e=d.current,f=e&&e.locals;return a.element=angular.element(document.createElement("div")),a.element.html(f.$template),a.element.addClass("amu-page"),a.scope=g.$new(),e.controller&&(f.$scope=a.scope,a.controller=c(e.controller,f),a.element.contents().data("$ngControllerController",a.controller)),b(a.element.contents())(a.scope),f&&f.$template&&h.append(a.element),a.scope.$emit("$viewContentLoaded"),a.scope.$eval(i.onLoad),a}var k;g.$on("$pageTransitionStart",function(b,c,h,l){function m(){function b(){var b=e(c.element,h?h.element:null,m,l);return b.then(function(){h&&(a.$broadcast("$pageTransitionSuccess",c,h),h.scope.$destroy(),h.element.remove(),h=void 0)}),b}var k=d.current&&d.current.$$route||{},m=l?h.transition():c.transition();j(c),(c.reverse()||k.reverse)&&(l=!l),c.element.css("display","none");var n=g.$eval(i.deferTransition)||f.when();n.cancel=function(){o=!0,c.element.css("display","")};var o=!1;return n.then(function(){return o?void 0:(c.element.css("display",""),b())}),n}k&&k.cancel(),k=m(c,h,l)})}return{restrict:"EA",link:g}}]).directive("scrollable",["$route",function(a){var b={};return{restrict:"EA",link:function(c,d){var e=a.current?a.current.$$route:{},f=e.templateUrl||e.template,g=d[0];f&&(setTimeout(function(){var a=b[f];a&&(g.scrollTop=a)}),c.$on("$destroy",function(){b[f]=g.scrollTop}))}}}]),angular.module("ui.container.drawer",[]).controller("DrawerController",["$scope","$rootScope",function(a,b){var c=this;c.drawers=a.drawers={leftActive:!1,rightActive:!1},b.$on("resetDrawerLeft",function(){a.drawers.leftActive=!1}),b.$on("resetDrawerRight",function(){a.drawers.rightActive=!1}),b.$on("toggleDrawerLeft",function(){a.drawers.leftActive=!a.drawers.leftActive,a.drawers.rightActive&&a.$emit("resetDrawerLeft")}),b.$on("toggleDrawerRight",function(){a.drawers.rightActive=!a.drawers.rightActive,a.drawers.leftActive&&a.$emit("resetDrawerLeft")}),b.$on("$routeChangeSuccess",function(){a.drawers.leftActive&&a.$emit("resetDrawerLeft"),a.drawers.rightActive&&a.$emit("resetDrawerRight")})}]).directive("drawer",function(){return{restrict:"EA",templateUrl:"tpls/drawer/drawer.html",controller:"DrawerController",transclude:!0,replace:!0,scope:{drawerLeftTpl:"=",drawerRightTpl:"="}}}),angular.module("ui.container.error-alert",[]).directive("errorAlert",["$rootScope","$timeout",function(a,b){return{restrict:"EA",replace:!0,template:"<div class=\"error-alert\"><span ng-bind='content'></span></div>",link:function(c,d){a.$on("showErrorAlert",function(a,e){c.content=e.content,d.addClass("fade"),b(function(){d.addClass("in")},100),b(function(){d.removeClass("in"),b(function(){d.removeClass("fade")},500)},4e3)})}}}]),angular.module("app.nav.nav-left",[]).controller("NavLeftCtrl",["$scope","$rootScope","$navigate","toolList",function(a,b,c,d){a.navList=[],angular.forEach(d,function(b){"left"==b.navList&&a.navList.push(b)}),b.$on("$routeChangeSuccess",function(b,c){angular.forEach(a.navList,function(a){a.active=!1,c.path==a.path&&(a.active=!0)})}),a.switchPage=function(b){a.$emit("resetDrawerLeft"),c.go(b.path,"slide")}}]),angular.module("app.nav.nav-right",[]).controller("NavRightCtrl",["$scope","$rootScope","$navigate","toolList",function(a,b,c,d){a.$navigate=c,a.navList=[],angular.forEach(d,function(b){"right"==b.navList&&a.navList.push(b)}),a.logout=function(){c.go("/")},a.switchPage=function(b){a.$emit("resetDrawerLeft"),c.go(b.path,"slide")}}]),angular.module("app.tool.news",[]).controller("NewsCtrl",["$scope","$navigate",function(a,b){a.navList=[],a.switchPage=function(c){a.$emit("resetDrawerLeft"),b.go(c.path,"slide")}}]),angular.module("ui.container.swipe-tabs",["utils.hammer"]).controller("SwipeTabsetController",["$scope","$element",function(a){var b=this,c=b.tabs=a.tabs=[];b.select=function(b,d){angular.forEach(c,function(a){a.active=!1}),b.active=!0,d||a.showPane(c.indexOf(b))},b.addTab=function(a){c.push(a),(1===c.length||a.active)&&b.select(a)},b.removeTab=function(a){var d=c.indexOf(a);if(a.active&&c.length>1){var e=d==c.length-1?d-1:d+1;b.select(c[e])}c.splice(d,1)}}]).directive("swipeTabset",["$window","Hammer","$rootScope",function(a,b,c){return{restrict:"EA",transclude:!0,replace:!0,require:"^swipeTabset",scope:{},controller:"SwipeTabsetController",templateUrl:"tpls/swipe-tabs/swipe-tabset.html",compile:function(d,e,f){var g=d.find("container"),h=0,i=!1;return c.$on("domPulling",function(a,b){i=b.isPulling}),function(c,e,j,k){function l(a,b){g.removeClass("animate"),b&&g.addClass("animate"),g.css({webkitTransform:"translate3d("+a+"%,0,0) scale3d(1,1,1)",transform:"translate3d("+a+"%,0,0) scale3d(1,1,1)"})}function m(a){switch(a.gesture.preventDefault(),a.type){case"dragright":case"dragleft":if(i)a.stopPropagation();else{var b=-(100/c.tabs.length)*h,d=100/c.paneWidth*a.gesture.deltaX/c.tabs.length;(0==h&&"right"==a.gesture.direction||h==c.tabs.length-1&&"left"==a.gesture.direction)&&(d*=.4)}l(d+b);break;case"swipeleft":c.showPane(h+1),a.gesture.stopDetect();break;case"swiperight":c.showPane(h-1),a.gesture.stopDetect();break;case"release":Math.abs(a.gesture.deltaX)>c.paneWidth/2?"left"==a.gesture.direction?c.showPane(h+1):c.showPane(h-1):c.showPane(h)}c.$apply()}c.tabsAbove="below"!=c.direction,k.$scope=c,k.$transcludeFn=f,c.paneWidth=d[0].offsetWidth,angular.element(a).bind("load resize orientationchange",function(){c.paneWidth=d[0].offsetWidth,c.$apply()}),c.showPane=function(a){a=Math.max(0,Math.min(a,c.tabs.length-1)),h=a;var b=-(100/c.tabs.length*h);l(b,!0),k.select(c.tabs[h],!0)},b(g[0],{drag_lock_to_axis:!0}).on("release dragleft dragright swipeleft swiperight",m)}}}}]).directive("swipeTab",["$parse","$http","$templateCache","$compile",function(a){return{require:"^swipeTabset",restrict:"EA",replace:!0,templateUrl:"tpls/swipe-tabs/swipe-tab.html",transclude:!0,scope:{heading:"@",onSelect:"&select",onDeselect:"&deselect"},controller:function(){},compile:function(b,c,d){return function(b,c,e,f){var g,h;e.active?(g=a(e.active),h=g.assign,b.$parent.$watch(g,function(a){b.active=!!a}),b.active=g(b.$parent)):h=g=angular.noop,b.$watch("active",function(a){h(b.$parent,a),a?(f.select(b),b.onSelect(),c.css({width:"35%"})):(b.onDeselect(),c.css({width:65/(f.tabs.length-1)+"%"}))}),b.disabled=!1,e.disabled&&b.$parent.$watch(a(e.disabled),function(a){b.disabled=!!a
}),b.select=function(){b.disabled||(b.active=!0)},f.addTab(b),b.$on("$destroy",function(){f.removeTab(b)}),b.active&&h(b.$parent,!0),b.$transcludeFn=d}}}}]).directive("swipeTabHeadingTransclude",[function(){return{restrict:"A",require:"^swipeTab",link:function(a,b){a.$watch("headingElement",function(a){a&&(b.html(""),b.append(a))})}}}]).directive("swipeTabContentTransclude",["$compile","$parse",function(){function a(a){return a.tagName&&(a.hasAttribute("swipe-tab-heading")||a.hasAttribute("data-tab-heading")||"swipe-tab-heading"===a.tagName.toLowerCase()||"data-tab-heading"===a.tagName.toLowerCase())}return{restrict:"A",require:"^swipeTabset",link:function(b,c,d){var e=b.$eval(d.swipeTabContentTransclude);e.$transcludeFn(e.$parent,function(b){angular.forEach(b,function(b){a(b)?e.headingElement=b:c.append(b)})})}}}]).directive("swipeTabsetTitles",function(){return{restrict:"A",require:"^swipeTabset",templateUrl:"tpls/swipe-tabs/swipe-tabset-titles.html",replace:!0,link:function(a,b,c,d){a.$eval(c.swipeTabsetTitles)?d.$transcludeFn(d.$scope.$parent,function(a){b.append(a)}):b.remove()}}}),angular.module("ui.container.pull-refresh",["utils.hammer"]).directive("pullRefresh",["Hammer",function(a){return{restrict:"EA",transclude:!0,replace:!0,scope:{pullRefresh:"&",isLoading:"="},templateUrl:"tpls/pull-refresh/pull-refresh.html",controller:function(){},link:function(b,c){function d(a,b){e.removeClass("animate"),b&&e.addClass("animate"),e.css({webkitTransform:"translate3d(0,"+a+"px,0) scale3d(1,1,1)",transform:"translate3d(0,"+a+"px,0) scale3d(1,1,1)"})}var e=c.find("container"),f=60;b.$watch("isLoading",function(a){a||d(0,!0)});var g=function(a){switch(a.type){case"touch":d(0,!0);break;case"release":if(!b.isPulling)return;a.gesture.deltaY>=f?(d(60,!0),b.pullRefresh(),b.isPullingEnough=!1):d(0,!0),b.isPulling=!1,b.$emit("domPulling",{isPulling:b.isPulling});break;case"dragdown":var c=e[0].scrollTop;if(c>5)return;0!==c&&(e[0].scrollTop=0),b.isPullingEnough=a.gesture.deltaY>=f,b.isPulling||(b.isPulling=!0,b.$emit("domPulling",{isPulling:b.isPulling})),d(a.gesture.deltaY),a.gesture.preventDefault()}b.$apply()};a(e[0]).on("touch dragdown release",g)}}}]),angular.module("app.tool.course",["ui.container.swipe-tabs","ui.container.pull-refresh"]).controller("CourseCtrl",["$scope","$navigate",function(a){a.navList=[],a.rdImgSrc="http://lorempixel.com/800/600/?"+(new Date).getTime(),a.isLoading=!1,a.rdImg=function(){console.log("rdImg"),a.isLoading=!0;var b=new Image;b.onload=function(){console.log("rdImg onloaded"),a.rdImgSrc=this.src,a.isLoading=!1,a.$digest()},b.src="http://lorempixel.com/800/600/?"+(new Date).getTime()}}]),angular.module("app.main",["utils.hammer","utils.mobile-nav","ui.container.drawer","ui.container.error-alert","app.nav.nav-left","app.nav.nav-right","app.tool.news","app.tool.course"]).constant("toolList",[{name:"载入动画",path:"/",templateUrl:"partials/tools/loader.html"},{name:"新闻",navList:"left",path:"/news",templateUrl:"partials/tools/news.html",transition:"modal",controller:"NewsCtrl"},{name:"课程",navList:"left",path:"/course",templateUrl:"partials/tools/course.html",transition:"modal",controller:"CourseCtrl"},{name:"设置",navList:"right",path:"/settings",templateUrl:"partials/tools/settings.html",transition:"modal"}]).config(["$routeProvider","toolList",function(a,b){for(var c,d=b.length;d--;)c=b[d],a.when(c.path,c);a.otherwise({redirectTo:"/"})}]).run(["$route","$http","$templateCache",function(a,b,c){angular.forEach(a.routes,function(a){a.templateUrl&&b.get(a.templateUrl,{cache:c})})}]).controller("MainCtrl",["$scope","$rootScope","$navigate","$location",function(a,b,c){a.$navigate=c,a.goLastPath=function(){c.go("/news")},a.toggleDrawerLeft=function(){a.$emit("toggleDrawerLeft")},a.toggleDrawerRight=function(){a.$emit("toggleDrawerRight")},a.showError=function(b){a.$emit("showErrorAlert",{content:b})}}]),angular.bootstrap(window.document,["amu"]);